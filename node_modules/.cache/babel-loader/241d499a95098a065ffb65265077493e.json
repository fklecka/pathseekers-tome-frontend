{"remainingRequest":"/Users/florianklecka/Documents/SAE - WEB DESIGN/DIPLOMPROJEKT/Pathseekers Tome/frontend/node_modules/babel-loader/lib/index.js!/Users/florianklecka/Documents/SAE - WEB DESIGN/DIPLOMPROJEKT/Pathseekers Tome/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/florianklecka/Documents/SAE - WEB DESIGN/DIPLOMPROJEKT/Pathseekers Tome/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/florianklecka/Documents/SAE - WEB DESIGN/DIPLOMPROJEKT/Pathseekers Tome/frontend/src/views/account/AccountOverview.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/florianklecka/Documents/SAE - WEB DESIGN/DIPLOMPROJEKT/Pathseekers Tome/frontend/src/views/account/AccountOverview.vue","mtime":1641638405234},{"path":"/Users/florianklecka/Documents/SAE - WEB DESIGN/DIPLOMPROJEKT/Pathseekers Tome/frontend/babel.config.js","mtime":1637316304951},{"path":"/Users/florianklecka/Documents/SAE - WEB DESIGN/DIPLOMPROJEKT/Pathseekers Tome/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/florianklecka/Documents/SAE - WEB DESIGN/DIPLOMPROJEKT/Pathseekers Tome/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/florianklecka/Documents/SAE - WEB DESIGN/DIPLOMPROJEKT/Pathseekers Tome/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/florianklecka/Documents/SAE - WEB DESIGN/DIPLOMPROJEKT/Pathseekers Tome/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9mbG9yaWFua2xlY2thL0RvY3VtZW50cy9TQUUgLSBXRUIgREVTSUdOL0RJUExPTVBST0pFS1QvUGF0aHNlZWtlcnMgVG9tZS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9mbG9yaWFua2xlY2thL0RvY3VtZW50cy9TQUUgLSBXRUIgREVTSUdOL0RJUExPTVBST0pFS1QvUGF0aHNlZWtlcnMgVG9tZS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBDdXN0b21CdXR0b24gZnJvbSAiLi4vLi4vY29tcG9uZW50cy9DdXN0b21CdXR0b24udnVlIjsKaW1wb3J0IEFib0NhcmQgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9BYm9DYXJkLnZ1ZSI7CmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IENvbmZpcm1Nb2RhbCBmcm9tICIuLi8uLi9jb21wb25lbnRzL0NvbmZpcm1Nb2RhbC52dWUiOwppbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gInZ1ZS10b2FzdGlmaWNhdGlvbiI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQWNjb3VudE92ZXJ2aWV3IiwKICBjb21wb25lbnRzOiB7CiAgICBDdXN0b21CdXR0b246IEN1c3RvbUJ1dHRvbiwKICAgIEFib0NhcmQ6IEFib0NhcmQsCiAgICBDb25maXJtTW9kYWw6IENvbmZpcm1Nb2RhbAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbmZpcm1WaXNpYmxlUGFzc3dvcmQ6IGZhbHNlLAogICAgICBjb25maXJtVmlzaWJsZUFjY291bnQ6IGZhbHNlLAogICAgICBlcnJvcnM6IHt9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoewogICAgdXNlcjogImF1dGgvdXNlciIKICB9KSksCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKHsKICAgIGxvZ291dDogImF1dGgvbG9nb3V0IiwKICAgIGdldFVzZXI6ICJhdXRoL2dldFVzZXIiCiAgfSkpLCB7fSwgewogICAgcmVzZXRQYXNzd29yZDogZnVuY3Rpb24gcmVzZXRQYXNzd29yZCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHRvYXN0LCByZXF1ZXN0LCBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRvYXN0ID0gdXNlVG9hc3QoKTsKICAgICAgICAgICAgICAgIHJlcXVlc3QgPSB7fTsKICAgICAgICAgICAgICAgIHJlcXVlc3QuZW1haWwgPSBfdGhpcy51c2VyLmVtYWlsOwoKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoIi9hcGkvcGFzc3dvcmQvZW1haWwiLCByZXF1ZXN0KTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKF9yZWYpIHsKICAgICAgICAgICAgICAgICAgZGF0YSA9IF9yZWYuZGF0YTsKICAgICAgICAgICAgICAgICAgX3RoaXMuZXJyb3JzID0gZGF0YS5lcnJvcnM7CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICBfdGhpcy4kc3RvcmUuc3RhdGUuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIHRvYXN0LnN1Y2Nlc3MoIkUtTWFpbCB6dW0gw6RuZGVybiBkZXMgUGFzc3dvcnRzIHd1cmRlIGdlc2VuZGV0ISIpOwogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5lcnJvcnMpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZGVsZXRlQWNjb3VudDogZnVuY3Rpb24gZGVsZXRlQWNjb3VudCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgdG9hc3Q7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRvYXN0ID0gdXNlVG9hc3QoKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5kZWxldGUoIi9hcGkvYWNjb3VudC9kZWxldGUvIiArIF90aGlzMi51c2VyLmlkKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLmxvZ291dCgpOwogICAgICAgICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHRvYXN0LnN1Y2Nlc3MoIkFjY291bnQgd3VyZGUgZ2Vsw7ZzY2h0ISIpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCgiLyIpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfQogIH0pLAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldFVzZXIoKTsKICB9Cn07"},{"version":3,"sources":["/Users/florianklecka/Documents/SAE - WEB DESIGN/DIPLOMPROJEKT/Pathseekers Tome/frontend/src/views/account/AccountOverview.vue"],"names":[],"mappings":";;;;AAqGA,OAAO,YAAP,MAAyB,mCAAzB;AACA,OAAO,OAAP,MAAoB,8BAApB;AACA,SAAS,UAAT,EAAqB,UAArB,QAAuC,MAAvC;AACA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,YAAP,MAAyB,mCAAzB;AACA,SAAS,QAAT,QAAyB,oBAAzB;AACA,eAAe;AACb,EAAA,IAAI,EAAE,iBADO;AAEb,EAAA,UAAU,EAAE;AAAE,IAAA,YAAY,EAAZ,YAAF;AAAgB,IAAA,OAAO,EAAP,OAAhB;AAAyB,IAAA,YAAW,EAAX;AAAzB,GAFC;AAGb,EAAA,IAAI,EAAE,gBAAM;AACV,WAAO;AACL,MAAA,sBAAsB,EAAE,KADnB;AAEL,MAAA,qBAAqB,EAAE,KAFlB;AAGL,MAAA,MAAM,EAAE;AAHH,KAAP;AAKD,GATY;AAUb,EAAA,QAAQ,oBACH,UAAU,CAAC;AACZ,IAAA,IAAI,EAAE;AADM,GAAD,CADP,CAVK;AAeb,EAAA,OAAO,kCACF,UAAU,CAAC;AACZ,IAAA,MAAM,EAAE,aADI;AAEZ,IAAA,OAAO,EAAE;AAFG,GAAD,CADR;AAKC,IAAA,aALD,2BAKiB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACd,gBAAA,KADc,GACN,QAAQ,EADF;AAEd,gBAAA,OAFc,GAEJ,EAFI;AAGpB,gBAAA,OAAO,CAAC,KAAR,GAAgB,KAAI,CAAC,IAAL,CAAU,KAA1B;;AACA,oBAAI;AACF,kBAAA,KAAK,CAAC,IAAN,CAAW,qBAAX,EAAkC,OAAlC;AACF,iBAFA,CAEE,aAAiB;AAAR,kBAAA,IAAQ,QAAR,IAAQ;AACjB,kBAAA,KAAI,CAAC,MAAL,GAAc,IAAI,CAAC,MAAnB;AACF,iBAJA,SAIU;AACR,kBAAA,KAAI,CAAC,MAAL,CAAY,KAAZ,CAAkB,SAAlB,GAA8B,KAA9B;AACA,kBAAA,KAAK,CAAC,OAAN,CAAc,iDAAd;AACA,kBAAA,OAAO,CAAC,GAAR,CAAY,KAAI,CAAC,MAAjB;AACF;;AAZoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAarB,KAlBI;AAmBC,IAAA,aAnBD,2BAmBiB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACd,gBAAA,KADc,GACN,QAAQ,EADF;AAAA;AAAA,uBAEd,KAAI,CACP,MADG,CACI,yBAAyB,MAAI,CAAC,IAAL,CAAU,EADvC,EAEH,IAFG,CAEE,YAAM;AACV,kBAAA,MAAI,CAAC,MAAL;AACD,iBAJG,EAKH,OALG,CAKK,YAAM;AACb,kBAAA,KAAK,CAAC,OAAN,CAAc,yBAAd;;AACA,kBAAA,MAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,GAAlB;AACD,iBARG,CAFc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWrB;AA9BI,IAfM;AA+Cb,EAAA,OA/Ca,qBA+CH;AACR,SAAK,OAAL;AACD;AAjDY,CAAf","sourcesContent":["<template>\n  <div\n    class=\"\n      w-full\n      h-app\n      bg-bg\n      pt-6\n      md:pt-12\n      pb-36\n      md:pb-16 md:px-12\n      overflow-y-scroll\n    \"\n  >\n    <confirm-modal\n      v-if=\"confirmVisiblePassword\"\n      class=\"absolute left-0 top-0 z-50\"\n      @confirm=\"\n        resetPassword();\n        confirmVisiblePassword = false;\n      \"\n      @close=\"confirmVisiblePassword = false\"\n    >\n      <template v-slot:text>Willst du dein Passwort ändern?</template>\n      <template v-slot:confirm>Password ändern</template>\n    </confirm-modal>\n    <confirm-modal\n      v-if=\"confirmVisibleAccount\"\n      class=\"absolute left-0 top-0 z-50\"\n      @confirm=\"\n        deleteAccount();\n        confirmVisibleAccount = false;\n      \"\n      @close=\"confirmVisibleAccount = false\"\n    >\n      <template v-slot:text\n        ><p>Willst du deinen Account wirklich löschen?</p>\n        <p>Alle deine Charaktere werden unwiderruflich gelöscht!</p></template\n      >\n      <template v-slot:confirm>Account löschen</template>\n    </confirm-modal>\n    <div class=\"w-full xl:w-758 px-2 md:px-0\">\n      <h3 class=\"text-white text-xl pb-6 font-semibold\">Profil</h3>\n      <div class=\"pt-6\">\n        <table class=\"w-full\">\n          <tr class=\"border-b border-opacity-25\">\n            <td class=\"font-semibold text-white opacity-25 w-2/4 py-3\">\n              Benutzername\n            </td>\n            <td class=\"text-white w-2/4\">{{ this.user.username }}</td>\n          </tr>\n          <tr class=\"border-b border-opacity-25\">\n            <td class=\"font-semibold text-white opacity-25 w-2/4 py-3\">\n              E-Mail\n            </td>\n            <td class=\"text-white w-2/4\">{{ this.user.email }}</td>\n          </tr>\n        </table>\n        <custom-button class=\"bg-card mt-6\"\n          ><router-link to=\"edit\">Profil bearbeiten</router-link></custom-button\n        >\n        <custom-button\n          class=\"bg-card mt-6 ml-2 md:ml-6\"\n          @click=\"confirmVisiblePassword = true\"\n        >\n          Passwort ändern\n        </custom-button>\n      </div>\n      <h3 class=\"text-white text-xl pt-12 pb-6 font-semibold\">\n        Dein Abonnement\n      </h3>\n      <abo-card\n        v-if=\"this.user.abo === 'free'\"\n        title=\"Free\"\n        text=\"Nutze Pathseeker's Tome gratis mit beschränkter Anzahl an Charakter-Slots\"\n      />\n      <abo-card\n        v-if=\"this.user.abo === 'premium'\"\n        class=\"my-6\"\n        title=\"Premium\"\n        text=\"Nutze Pathseeker’s Tome mit unbegrenzter\n      Anzahl an Charakter-Slots.\"\n        price=\"3,99€ / Monat\"\n      />\n      <custom-button class=\"bg-card mt-6\"\n        ><router-link to=\"subscriptions\"\n          >Abonnement ändern</router-link\n        ></custom-button\n      >\n    </div>\n    <div>\n      <h3 class=\"text-white text-xl pb-6 pt-12 font-semibold\">\n        Account löschen\n      </h3>\n      <custom-button class=\"bg-red-600\" @click=\"confirmVisibleAccount = true\"\n        >Account löschen</custom-button\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport CustomButton from \"../../components/CustomButton.vue\";\nimport AboCard from \"../../components/AboCard.vue\";\nimport { mapGetters, mapActions } from \"vuex\";\nimport axios from \"axios\";\nimport ConfirmModal from \"../../components/ConfirmModal.vue\";\nimport { useToast } from \"vue-toastification\";\nexport default {\n  name: \"AccountOverview\",\n  components: { CustomButton, AboCard, ConfirmModal },\n  data: () => {\n    return {\n      confirmVisiblePassword: false,\n      confirmVisibleAccount: false,\n      errors: {},\n    };\n  },\n  computed: {\n    ...mapGetters({\n      user: \"auth/user\",\n    }),\n  },\n  methods: {\n    ...mapActions({\n      logout: \"auth/logout\",\n      getUser: \"auth/getUser\",\n    }),\n    async resetPassword() {\n      const toast = useToast();\n      const request = {};\n      request.email = this.user.email;\n      try {\n        axios.post(\"/api/password/email\", request);\n      } catch ({ data }) {\n        this.errors = data.errors;\n      } finally {\n        this.$store.state.isLoading = false;\n        toast.success(\"E-Mail zum ändern des Passworts wurde gesendet!\");\n        console.log(this.errors);\n      }\n    },\n    async deleteAccount() {\n      const toast = useToast();\n      await axios\n        .delete(\"/api/account/delete/\" + this.user.id)\n        .then(() => {\n          this.logout();\n        })\n        .finally(() => {\n          toast.success(\"Account wurde gelöscht!\");\n          this.$router.push(\"/\");\n        });\n    },\n  },\n  mounted() {\n    this.getUser();\n  },\n};\n</script>\n\n<style scoped></style>\n"],"sourceRoot":""}]}